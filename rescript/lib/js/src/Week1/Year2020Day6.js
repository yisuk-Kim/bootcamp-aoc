// Generated by ReScript, PLEASE EDIT WITH CARE
'use strict';

var Fs = require("fs");
var Belt_Array = require("rescript/lib/js/belt_Array.js");
var Caml_option = require("rescript/lib/js/caml_option.js");
var Belt_SetString = require("rescript/lib/js/belt_SetString.js");

var input = Fs.readFileSync("input/Week1/Year2020Day6.input.txt", "utf8");

function splitGroup(data) {
  return data.split("\n\n");
}

function splitPerson(data) {
  return data.split("\n");
}

function splitAnswer(answer) {
  return Belt_Array.map(answer, (function (x) {
                return x.split("");
              }));
}

function answerArrayToSet(answer) {
  return Belt_Array.map(answer, Belt_SetString.fromArray);
}

function getUnion(answer) {
  return Belt_Array.reduce(answer, undefined, Belt_SetString.union);
}

function answerSetToArray(answer) {
  return Belt_Array.map(answer, Belt_SetString.toArray);
}

function countQuestionNumber(question) {
  return question.length;
}

function sum(num) {
  return Belt_Array.reduce(num, 0, (function (acc, x) {
                return acc + x | 0;
              }));
}

var answerSet = Belt_Array.map(Belt_Array.map(Belt_Array.map(input.split("\n\n"), (function (x) {
                return x.split("\n");
              })), splitAnswer), (function (x) {
        return Belt_Array.map(x, Belt_SetString.fromArray);
      }));

var answer = Belt_Array.map(answerSet, getUnion);

console.log(sum(Belt_Array.map(Belt_Array.map(answer, Belt_SetString.toArray), (function (x) {
                return x.length;
              }))));

function getIntersection(answer) {
  var set = Belt_Array.get(answer, 0);
  return Belt_Array.reduce(answer, set !== undefined ? Caml_option.valFromOption(set) : undefined, Belt_SetString.intersect);
}

var answer$1 = Belt_Array.map(answerSet, getIntersection);

console.log(sum(Belt_Array.map(Belt_Array.map(answer$1, Belt_SetString.toArray), (function (x) {
                return x.length;
              }))));

exports.input = input;
exports.splitGroup = splitGroup;
exports.splitPerson = splitPerson;
exports.splitAnswer = splitAnswer;
exports.answerArrayToSet = answerArrayToSet;
exports.getUnion = getUnion;
exports.answerSetToArray = answerSetToArray;
exports.countQuestionNumber = countQuestionNumber;
exports.sum = sum;
exports.answerSet = answerSet;
exports.getIntersection = getIntersection;
/* input Not a pure module */
